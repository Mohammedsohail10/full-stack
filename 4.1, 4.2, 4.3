practical 4.1

const readline = require('readline');

// Create readline interface for user input
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

// Employee array to store data in memory
let employees = [
    { name: 'Alice', id: 'E101' },
    { name: 'Bob', id: 'E102' },
    { name: 'Charlie', id: 'E103' }
];

// Function to display menu
function displayMenu() {
    console.log('\nEmployee Management System');
    console.log('1. Add Employee');
    console.log('2. List Employees');
    console.log('3. Remove Employee');
    console.log('4. Exit');
}

// Function to list all employees
function listEmployees() {
    console.log('\nEmployee List:');
    if (employees.length === 0) {
        console.log('No employees found.');
    } else {
        employees.forEach((employee, index) => {
            console.log(`${index + 1}. Name: ${employee.name}, ID: ${employee.id}`);
        });
    }
}

// Function to add employee
function addEmployee() {
    rl.question('Enter employee name: ', (name) => {
        rl.question('Enter employee ID: ', (id) => {
            employees.push({ name: name, id: id });
            console.log(`Employee ${name} (ID: ${id}) added successfully.`);
            showMenu();
        });
    });
}

// Function to remove employee
function removeEmployee() {
    rl.question('Enter employee ID to remove: ', (id) => {
        const index = employees.findIndex(employee => employee.id === id);
        if (index !== -1) {
            const removedEmployee = employees.splice(index, 1)[0];
            console.log(`Employee ${removedEmployee.name} (ID: ${id}) removed successfully.`);
        } else {
            console.log(`Employee with ID ${id} not found.`);
        }
        showMenu();
    });
}

// Function to handle user choice
function handleChoice(choice) {
    switch (choice) {
        case '1':
            addEmployee();
            break;
        case '2':
            listEmployees();
            showMenu();
            break;
        case '3':
            removeEmployee();
            break;
        case '4':
            console.log('Goodbye!');
            rl.close();
            break;
        default:
            console.log('Invalid choice. Please try again.');
            showMenu();
    }
}

// Function to show menu and get user input
function showMenu() {
    displayMenu();
    rl.question('\nEnter your choice: ', (choice) => {
        handleChoice(choice);
    });
}

// Start the application
console.log('Welcome to Employee Management System!');
showMenu();

practical 4.2

const express = require('express');
const app = express();
const PORT = 3000;

// Middleware to parse JSON
app.use(express.json());

// In-memory storage for playing cards
let cards = [
    {
        id: 1,
        suit: "Hearts",
        value: "Ace"
    },
    {
        id: 2,
        suit: "Spades",
        value: "King"
    },
    {
        id: 3,
        suit: "Diamonds",
        value: "Queen"
    }
];

let nextId = 4;

// GET /cards - Retrieve all cards
app.get('/cards', (req, res) => {
    res.status(200).json(cards);
});

// GET /cards/:id - Retrieve a specific card by ID
app.get('/cards/:id', (req, res) => {
    const cardId = parseInt(req.params.id);
    const card = cards.find(c => c.id === cardId);
    
    if (!card) {
        return res.status(404).json({ message: `Card with ID ${cardId} not found` });
    }
    
    res.status(200).json(card);
});

// POST /cards - Add a new card
app.post('/cards', (req, res) => {
    const { suit, value } = req.body;
    
    // Validation
    if (!suit || !value) {
        return res.status(400).json({ message: 'Both suit and value are required' });
    }
    
    const newCard = {
        id: nextId++,
        suit: suit,
        value: value
    };
    
    cards.push(newCard);
    res.status(201).json(newCard);
});

// DELETE /cards/:id - Remove a specific card by ID
app.delete('/cards/:id', (req, res) => {
    const cardId = parseInt(req.params.id);
    const cardIndex = cards.findIndex(c => c.id === cardId);
    
    if (cardIndex === -1) {
        return res.status(404).json({ message: `Card with ID ${cardId} not found` });
    }
    
    const deletedCard = cards.splice(cardIndex, 1)[0];
    res.status(200).json({
        message: `Card with ID ${cardId} removed`,
        card: deletedCard
    });
});

// Start the server
app.listen(PORT, () => {
    console.log(`Playing Card Collection API server running on port ${PORT}`);
    console.log(`Access at: http://localhost:${PORT}`);
    console.log('\nAvailable endpoints:');
    console.log('GET    /cards      - Get all cards');
    console.log('GET    /cards/:id  - Get card by ID');
    console.log('POST   /cards      - Add new card');
    console.log('DELETE /cards/:id  - Delete card by ID');
});

module.exports = app;

practical 4.3

const express = require("express");
const cors = require("cors");
const app = express();
const PORT = 3000;

app.use(express.json());
app.use(cors()); // Allow all CORS requests
app.use(express.static("public")); // Serve index.html and static files

// In-memory seat data
let seats = [
  { id: 1, status: "available", lockTimeout: null },
  { id: 2, status: "available", lockTimeout: null },
  { id: 3, status: "available", lockTimeout: null },
  { id: 4, status: "available", lockTimeout: null },
  { id: 5, status: "available", lockTimeout: null },
];

// API: Get all seats
app.get("/seats", (req, res) => {
  res.json(seats.map(seat => ({ id: seat.id, status: seat.status })));
});

// API: Lock a seat
app.post("/book/lock/:id", (req, res) => {
  const seatId = parseInt(req.params.id);
  const seat = seats.find(s => s.id === seatId);

  if (!seat) return res.status(404).json({ message: "Seat not found" });
  if (seat.status !== "available")
    return res.status(400).json({ message: "Seat cannot be locked. It is already " + seat.status });

  seat.status = "locked";
  seat.lockTimeout = setTimeout(() => {
    if (seat.status === "locked") seat.status = "available";
  }, 60 * 1000); // Auto-release lock after 1 min

  res.json({ message: `Seat ${seat.id} locked successfully. Confirm within 1 minute.` });
});

// API: Confirm booking
app.post("/book/confirm/:id", (req, res) => {
  const seatId = parseInt(req.params.id);
  const seat = seats.find(s => s.id === seatId);

  if (!seat) return res.status(404).json({ message: "Seat not found" });
  if (seat.status !== "locked")
    return res.status(400).json({ message: "Seat is not locked and cannot be booked" });

  seat.status = "booked";
  if (seat.lockTimeout) {
    clearTimeout(seat.lockTimeout);
    seat.lockTimeout = null;
  }

  res.json({ message: `Seat ${seat.id} is booked successfully!` });
});

// Serve index.html on root
app.get("/", (req, res) => {
  res.sendFile(__dirname + "/public/index.html");
});

// Start server
app.listen(PORT, "0.0.0.0", () => {
  console.log(`Server running at http://0.0.0.0:${PORT}`);
});
